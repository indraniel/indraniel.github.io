<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Indraniel&#39;s Notebook</title>
        <description>Indraniel's Notebook</description>
        <link>http://indraniel.github.io</link>
        <atom:link href="http://indraniel.github.io/all.rss.xml" rel="self" type="application/rss+xml" />
        <item>
            <title>Python&#39;s Functional Features - Partials &amp; Generators</title>
            <description>&lt;p&gt;I&#39;ve been abstaining myself from reddit for a while to get some other things
done and I recently decided to catch up on the &lt;a href=&#34;http://www.reddit.com/r/programming&#34;&gt;programming subreddit&lt;/a&gt; news
en masse.&lt;/p&gt;
&lt;p&gt;One of the interesting posts I came across was &lt;a href=&#34;https://medium.com/@thechriskiehl/the-great-white-space-debate-3633cba8b5c1&#34;&gt;&#34;The Great White Space
Debate&#34;&lt;/a&gt;. It&#39;s an eloquent post on a dry programming topic; however, the
python script the author posted in the article piqued my attention. The script
locates the Java source files within a root project directory and then
identifies, counts, and summarizes the various for loop styles used within
them.  &lt;/p&gt;
&lt;p&gt;Here is the script taken from the blog post:&lt;/p&gt;
&lt;table class=&#34;codehilitetable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;linenos&#34;&gt;&lt;div class=&#34;linenodiv&#34;&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div class=&#34;codehilite&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;os&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;re&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;functools&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;partial&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_java_src_files&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;java_root&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;files&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;walk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;java_root&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;yield from&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;files&lt;/span&gt;
                    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;endswith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;.java&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;read_files&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filenames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filename&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filenames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;encoding&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;yield from&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;readlines&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;extract_forloops&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lines&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;yield from&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lines&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;for (&amp;#39;&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# One of those god forsaken &amp;#39;enhanced&amp;#39; for loops. Ignore&lt;/span&gt;
        &lt;span class=&#34;ow&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;:&amp;#39;&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;spaced_apart&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;partial&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;re&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;[a-zA-Z]\s\=&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;grouped_together&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;partial&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;re&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;[a-zA-Z]\=&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;java_src_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;r&amp;#39;C:\Program Files\Java\jdk1.8.0_20\src&amp;#39;&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;forloops&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;extract_forloops&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read_files&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_java_src_files&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;java_src_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;counts&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;spaced&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;nonspaced&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;loop&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;forloops&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;grouped_together&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;counts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;nonspaced&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;spaced_apart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;counts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;spaced&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;counts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;Being a python neophyte, I was interested in how this script was written.  The
script is liberally using two aspects of python&#39;s functional features:
 &lt;em&gt;&lt;a href=&#34;https://docs.python.org/2/library/functools.html#functools.partial&#34;&gt;partials&lt;/a&gt;&lt;/em&gt; and &lt;em&gt;&lt;a href=&#34;https://docs.python.org/2/howto/functional.html#generators&#34;&gt;generators&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;
&lt;h2&gt;Partials&lt;/h2&gt;
&lt;h3&gt;Theory&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;f(args)&lt;/code&gt; operator is used to make a function call on function &lt;code&gt;f&lt;/code&gt;.
Each argument to a function is an expression.  Before the function gets
executed, all of its argument expressions are evaluated from left to
right.  This is known as &lt;em&gt;application order evaluation&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;It is possible to partially evaluate function arguments using the
&lt;code&gt;partial()&lt;/code&gt; function from the &lt;code&gt;functools&lt;/code&gt; module.  For example:&lt;/p&gt;
&lt;div class=&#34;codehilite&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;functools&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;partial&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;partial&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# supply values to foo&amp;#39;s x and y arguments &lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;                    &lt;span class=&#34;c1&#34;&gt;# calls foo(1,2,3), result is 6&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;partial()&lt;/code&gt; function preemptively evaluates some of the arguments to
a function, and returns an object that you can call to supply the
remaining arguments at a later point. &lt;/p&gt;
&lt;p&gt;In the above example, the variable &lt;code&gt;fn&lt;/code&gt; represents a partially evaluated
function where the first two arguments, &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; are already supplied and
evaluated.  The third argument, &lt;code&gt;z&lt;/code&gt;, is given later on the next line. The
function is then complete and executed, yielding a result of 6.&lt;/p&gt;
&lt;p&gt;Partial evaluation of function arguments is closely related to
&lt;em&gt;&lt;a href=&#34;http://en.wikipedia.org/wiki/Currying&#34;&gt;currying&lt;/a&gt;&lt;/em&gt;, a functional programming technique where a function
taking multiple arguments is decomposed into a series of functions each
taking only one argument. For example, given a function &lt;code&gt;f(x,y)&lt;/code&gt;, you
partially evaluate &lt;code&gt;f&lt;/code&gt; by fixing &lt;code&gt;x&lt;/code&gt; to get a new function to which you
give values of &lt;code&gt;y&lt;/code&gt; to produce a result.  &lt;/p&gt;
&lt;h3&gt;Practice&lt;/h3&gt;
&lt;p&gt;In the Java for loop identifying code the author creates partially evaluated functions on lines 24-25:&lt;/p&gt;
&lt;div class=&#34;codehilite&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;spaced_apart&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;partial&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;re&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;[a-zA-Z]\s\=&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;grouped_together&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;partial&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;re&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;[a-zA-Z]\=&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and invokes them on the &lt;code&gt;if&lt;/code&gt; statements on lines 33 and 35:&lt;/p&gt;
&lt;div class=&#34;codehilite&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;grouped_together&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;counts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;nonspaced&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;spaced_apart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;counts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;spaced&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The author is using the partials as a way to &#34;label&#34; his regular expression through descriptive and readable function variable names.  An interesting approach!&lt;/p&gt;
&lt;h2&gt;Generators&lt;/h2&gt;
&lt;h3&gt;Theory&lt;/h3&gt;
&lt;p&gt;Whenever a function uses the &lt;code&gt;yield&lt;/code&gt; keyword, it defines a &lt;em&gt;generator&lt;/em&gt; object.  A generator is a function that produces a sequence of values for use in iteration.  For example,&lt;/p&gt;
&lt;div class=&#34;codehilite&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;countdown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;Counting down from {}&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;yield&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you define the above function in a REPL and execute it, like so:&lt;/p&gt;
&lt;div class=&#34;codehilite&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt; c = countdown(5)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;you&#39;ll notice that none of the code gets executed.  Instead &lt;code&gt;countdown&lt;/code&gt; returns a generator object which is assigned to variable &lt;code&gt;c&lt;/code&gt;.  The generator object will begin to execute the function only when the &lt;code&gt;next()&lt;/code&gt; method is applied to it like so:&lt;/p&gt;
&lt;div class=&#34;codehilite&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt; c.next()  # &amp;quot;it&amp;#39;s c.__next__ in Python 3.x&amp;quot;
Counting down from 5
5
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;On the first call to &lt;code&gt;next()&lt;/code&gt;, the generator function executes statements until it reaches a &lt;code&gt;yield&lt;/code&gt; statement.  The &lt;code&gt;yield&lt;/code&gt; statement produces a result at which point execution of the function stops until &lt;code&gt;next()&lt;/code&gt; is invoked again.  Subsequent &lt;code&gt;next()&lt;/code&gt; calls resumes executing the function starting with the statement following &lt;code&gt;yield&lt;/code&gt;. Continuing with our running example, a second call to &lt;code&gt;next()&lt;/code&gt; will behave like:&lt;/p&gt;
&lt;div class=&#34;codehilite&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt; c.next()
4
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In python, you don&#39;t normally call &lt;code&gt;next()&lt;/code&gt; directly; rather, it&#39;s called indirectly via a &lt;code&gt;for&lt;/code&gt;, or some other operation that works on a sequence.&lt;/p&gt;
&lt;p&gt;A generator function signals its completion by returning or raising a &lt;code&gt;StopIteration&lt;/code&gt; exception.  Afterwards, continued &lt;code&gt;next()&lt;/code&gt; calls should always return &lt;code&gt;None&lt;/code&gt;.&lt;/p&gt;
&lt;h4&gt;Warning&lt;/h4&gt;
&lt;p&gt;A subtle problem with generators happens when a generator is partially consumed.  An example scenario is:&lt;/p&gt;
&lt;div class=&#34;codehilite&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;countdown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# otherwise, do more stuff...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here, the &lt;code&gt;for&lt;/code&gt; loop aborts when &#34;n&#34; becomes equal to 2, however, the associated generator never fully completes.  When a generator is no longer used, or gets deleted once out of scope, a generator method named &lt;code&gt;close()&lt;/code&gt; is invoked.  Normally it&#39;s not necessary to call &lt;code&gt;close()&lt;/code&gt; directly, but you can call it manually like so:&lt;/p&gt;
&lt;div class=&#34;codehilite&#34;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt; c = countdown(5)
&amp;gt;&amp;gt;&amp;gt; c.next()
Counting down from 5
5
&amp;gt;&amp;gt;&amp;gt; c.next()
4
&amp;gt;&amp;gt;&amp;gt; c.close()
&amp;gt;&amp;gt;&amp;gt; c.next()
Traceback (most recent call last):
File &amp;quot;&amp;lt;stdin&amp;gt;&amp;quot;, line 1, in &amp;lt;module&amp;gt;
StopIteration
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;A much more through description of python&#39;s generator feature is described &lt;a href=&#34;https://www.jeffknupp.com/blog/2013/04/07/improve-your-python-yield-and-generators-explained/&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Practice&lt;/h3&gt;
&lt;p&gt;Generators are a powerful way to write pythonic programs that are based on processing data streams of unknown size and limit.&lt;/p&gt;
&lt;p&gt;In the Java code parsing example, the &lt;code&gt;yield&lt;/code&gt; statement is called in all three of the functions defined in the script.  This approach is useful because we have an unknown data stream --  for any given Java project one doesn&#39;t know how many Java source files there are, and how many lines are in each source file.  Rather than loading everything up initially, we can lazily load up the source files and its line contents as needed.&lt;/p&gt;</description>
            <pubDate>Tue, 19 Aug 2014 12:00:00 GMT</pubDate>
            <link>http://indraniel.github.io/python-partials-and-generators/</link>
            <guid isPermaLink="true">http://indraniel.github.io/python-partials-and-generators/</guid>
        </item>
        <item>
            <title>Thinking Basics</title>
            <description>&lt;blockquote&gt;
&lt;p&gt;&#34;Education is what survives when what has been learned has been forgotten&#34;&lt;/p&gt;
&lt;p&gt;&amp;mdash; &lt;cite&gt;B. F. Skinner&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I often feel I&#39;m caught in the prevailing conventional wisdom of the moment and
lose sight of the fundamentals. Sometimes it&#39;s nice to be reminded of the
basics.&lt;/p&gt;
&lt;p&gt;I recently came across &#34;&lt;a href=&#34;http://www.amazon.com/dp/0691156662&#34;&gt;The 5 Elements of Effective Thinking&lt;/a&gt;&#34;. The book,
written by a couple of mathematicians, describes a set of strategies and habits
to improve thought, and associates them with the classical elements that were
once believed to be the essential parts of nature (Earth, Fire, Air &amp;amp; Water).
While I have not fully read the book, I found the following excerpt from the
front matter interesting:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Understand deeply&lt;/strong&gt; &lt;em&gt;(Earth)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Don&#39;t face complex issues head-on; first understand simple ideas deeply.
Clear the clutter and expose what is really important. Be brutally honest about
what you know and don&#39;t know. Then see what&#39;s missing, identify the gaps, and
fill them in. Let go of bias, prejudice, and preconcieved notions. There are
degrees to understanding (it&#39;s not just a yes-or-no proposition) and you can
heighten yours. Rock-solid understanding is the foundation for success.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Make mistakes&lt;/strong&gt; &lt;em&gt;(Fire)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Fail to succeed. Intentionally get it wrong to inevitably get it even more
right. Mistakes are great teachers - they highlight unforseen opportunities and
holes in your understanding. They also show you which way to turn next, and
they ignite your imagination.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Raise Questions&lt;/strong&gt; &lt;em&gt;(Air)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Constantly create questions to clarify and extend your understanding.
What&#39;s the real question? Working on the wrong question can waste a
lifetime. Ideas are in the air - the right questions will bring them out
and help you see connections that otherwise would have been invisible.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Follow the flow of ideas&lt;/strong&gt; &lt;em&gt;(Water)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Look back to see where ideas came from and then look ahead to discover where
those ideas may lead. A new idea is a beginning, not an end. Ideas are rare -
milk them. Following the consequences of small ideas can result in big payoffs.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;By mastering these strategies, you can and will change. The classical elements
of nature included a fifth special element - the &lt;em&gt;quintessential element&lt;/em&gt; - that
was the changeless matter from which all the heavens were made. Ironically,
here in our context of thinking and learning, the quintessential element is
&lt;em&gt;change&lt;/em&gt;.&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt; &lt;b&gt;Change&lt;/b&gt; &lt;em&gt;(The Quintessential Element)&lt;/em&gt;
    &lt;p&gt;&lt;/p&gt;
    &lt;p&gt;
    The unchanging element is change - by mastering the first four elements, you
    can change the way you think and learn. You can always improve, grow, and
    extract more out of your education, yourself, and the way you live your life.
    Change is the universal constant that allows you to get the most out of living
    and learning.
    &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;My Father, the ever lifelong learner, regularly practiced many of the above
notions and would have been an advocate of the techniques.&lt;/p&gt;</description>
            <pubDate>Tue, 01 Jan 2013 12:00:00 GMT</pubDate>
            <link>http://indraniel.github.io/thinking-basics/</link>
            <guid isPermaLink="true">http://indraniel.github.io/thinking-basics/</guid>
        </item>
        <item>
            <title>A Taste of Reservoir Algorithms</title>
            <description>&lt;p&gt;&lt;center&gt;
&lt;img alt=&#34;A Chocolate Sampling&#34; src=&#34;http://farm1.static.flickr.com/15/68153223_665dbdf47d_m.jpg&#34;&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;Imagine that you are the Chief Chocolate Inspector of a chocolate factory. Your
job is to ensure that the days production of chocolate by the factory is of
good quality. Only upon your recommendation will the factory be shipping out
its days worth of chocolate production to its distribution points.&lt;/p&gt;
&lt;p&gt;The chocolate factory consists of three adjacent rooms connected together by a
conveyor belt/assembly line.&lt;/p&gt;
&lt;p&gt;The first room is where the chocolate pieces are produced and initially placed
onto the conveyor belt. The factory produces a variety of decadent chocolate
types simultaneously and randomly places each type onto the conveyor belt.&lt;/p&gt;
&lt;p&gt;The second adjoining room is where each of the individual chocolate pieces get
wrapped up. Afterwards, you are given a choice whether to choose that
particular piece for taste inspection, or ignore it and wait for the next one.&lt;/p&gt;
&lt;p&gt;The final adjoining room is where the chocolate pieces get packaged together in
boxes and loaded onto the delivery trucks. The trucks only move upon your
decision at the end of the day.&lt;/p&gt;
&lt;p&gt;Your goal, as the Chief Inspector, is to notify the truck drivers if the
packages are suitable for shipping in as efficient manner as possible. Armed
with a special selection bin to hold $n$ pieces of chocolate, you decide to
choose $n$ uniformly random pieces of chocolate out the $N$ total pieces of
chocolate produced by the factory throughout the day, where $n&amp;lt;&amp;lt;N$. Afterwards,
you base your taste decision on this random subset.&lt;/p&gt;
&lt;p&gt;Unfortunately, you have no idea as to how many chocolate entities will be
passing by on any given day. Some days, the amount of chocolate produced by the
factory is very high, on others it is pretty low. In other words, you do not
know what $N$ is beforehand.&lt;/p&gt;
&lt;p&gt;While you could wait to make the sampling after the days production is done;
you don’t want to hold up the assembly line making these quality control
choices. &#34;&lt;a href=&#34;http://en.wikipedia.org/wiki/I_Love_Lucy&#34;&gt;I Love Lucy&lt;/a&gt;&#34; has shown what kind of hijinks can happen if this
process goes awry.&lt;/p&gt;
&lt;p&gt;&lt;span class=&#39;embed-youtube&#39; style=&#39;text-align:center; display: block;&#39;&gt;
&lt;iframe class=&#39;youtube-player&#39; type=&#39;text/html&#39; width=&#39;520&#39; height=&#39;323&#39; src=&#39;http://www.youtube.com/embed/8NPzLBSBzPI?version=3&amp;#038;rel=1&amp;#038;fs=1&amp;#038;showsearch=0&amp;#038;showinfo=1&amp;#038;iv_load_policy=1&amp;#038;wmode=transparent&#39; frameborder=&#39;0&#39;&gt;&lt;/iframe&gt;&lt;/p&gt;
&lt;h2&gt;What to do?&lt;/h2&gt;
&lt;p&gt;One solution to this problem might be to roll a die as each chocolate piece
passes you. If the die rolls even, hold the chocolate for inspection in the
selection bin. Otherwise, let the chocolate pass through. If the selection bin
is full when choosing a chocolate piece, simply replace the oldest chocolate
piece in the bin with the new one.&lt;/p&gt;
&lt;p&gt;In this naïve approach, one is biased against keeping the earliest chocolate
samples with the ones selected later in the day. To resolve this issue, you can
use a loaded die or get more &#34;&lt;a href=&#34;http://en.wikipedia.org/wiki/Dungeons_%26_Dragons&#34;&gt;Dungeons &amp;amp; Dragons&lt;/a&gt;&#34;-esque by using more
sophisticated dice and rules as the day progresses.&lt;/p&gt;
&lt;p&gt;&lt;center&gt;
&lt;img alt=&#34;Multifaced dice&#34; src=&#34;/static/images/multifaced-dice.jpg&#34;&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;Then with some luck, you could get a uniform sampling of the days production of
chocolate.&lt;/p&gt;
&lt;p&gt;But there is a better way...&lt;/p&gt;
&lt;h2&gt;A Smarter Way&lt;/h2&gt;
&lt;p&gt;Suppose you could assign a uniform random (&lt;a href=&#34;http://http://en.wikipedia.org/wiki/Independent_and_identically_distributed_random_variables&#34;&gt;i.i.d&lt;/a&gt; of course!) number from
$[0,1)$ to each piece of chocolate you encounter on the assembly line.&lt;/p&gt;
&lt;p&gt;Now, to obtain a sampling of the days production of chocolate, simply choose
the chocolates corresponding to the $n$ lowest random numbers linked with them.
Each chocolate piece has an equal chance of being in the lowest $n$ choices, so
the sampling is uniform.&lt;/p&gt;
&lt;p&gt;With the ubiquitous computing power available these days, you could substitute
using dice with a &lt;a href=&#34;http://www.apple.com/iphone/apps-for-iphone/&#34;&gt;iPhone&lt;/a&gt; or &lt;a href=&#34;http://www.android.com/market/&#34;&gt;Android&lt;/a&gt; app to help out. Each time you see a new
chocolate piece, generate a random number with your app. Hold onto the
chocolate pieces that correspond to the $n$ lowest random numbers. If you
encounter a new chocolate piece that is linked with a random number that is
lower than the largest random number associated chocolate already in your
selection bin, simply replace the old one with the new one.&lt;/p&gt;
&lt;p&gt;By the end of the process you now have $n$ uniform samples of the entire days
chocolate production, and you never needed to hold onto more than those $n$
items. Pretty clever, eh!&lt;/p&gt;
&lt;p&gt;This approach could be optimized even further. For example, you could
preemptively generate a large list of random numbers; identify the lowest ones;
and afterwards directly choose those chocolate pieces as they appear off the
production line and bypass the rest.&lt;/p&gt;
&lt;p&gt;Amazingly, you could sample the entire days production of chocolates, $N$, in
less than $O(N)$ time. According to this &lt;a href=&#34;http://www.cs.umd.edu/~samir/498/vitter.pdf&#34;&gt;fellow&lt;/a&gt;, you can make the
process $O(n(1+log(N/n)))$ efficient.&lt;/p&gt;
&lt;p&gt;These techniques of sampling a set of unknown size through one pass are called
&lt;em&gt;&lt;a href=&#34;http://en.wikipedia.org/wiki/Reservoir_sampling&#34;&gt;reservoir algorithms&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;
&lt;h2&gt;The &#34;Real&#34; World&lt;/h2&gt;
&lt;p&gt;While most of us are not chocolate inspectors, we are all nowadays swamped in a
&#34;sea of data&#34;, from &lt;a href=&#34;http://www.nytimes.com/2009/12/15/science/15books.html&#34;&gt;science&lt;/a&gt; and &lt;a href=&#34;http://bits.blogs.nytimes.com/2010/07/26/bringing-data-mining-into-the-mainstream/&#34;&gt;business&lt;/a&gt; to &lt;a href=&#34;http://online.wsj.com/article/NA_WSJ_PUB:SB122852285532784401.html&#34;&gt;personal tracking&lt;/a&gt;.
Often times these raw data sets come in large chunks. One data-mining technique
to get a better handle of the data is sampling it. Sometimes less is more. Now
chocolate pieces become record sets and the assembly line becomes a large file.&lt;/p&gt;
&lt;p&gt;Reservoir algorithms can be a useful tool in one’s data &lt;a href=&#34;http://radar.oreilly.com/2010/06/what-is-data-science.html&#34;&gt;science &amp;amp;
engineering&lt;/a&gt; endeavors.&lt;/p&gt;</description>
            <pubDate>Tue, 10 Aug 2010 12:00:00 GMT</pubDate>
            <link>http://indraniel.github.io/a-taste-of-reservoir-algorithms/</link>
            <guid isPermaLink="true">http://indraniel.github.io/a-taste-of-reservoir-algorithms/</guid>
        </item>
    </channel>
</rss>